
üîß RCA AI Evidence Handling & Evaluation Instructions (vFinal)
üìÖ Issued: 2025-07-25
üß† Goal: Enable AI to intelligently evaluate uploaded evidence in Step 3 & Step 4, without hardcoding, and retain working logic in other steps.

---

‚úÖ GENERAL RULE: PRESERVE FUNCTIONALITY

- DO NOT CHANGE ANYTHING in Steps 0‚Äì2 or Steps 5‚Äì6 ‚Äî these are working.
- DO NOT hardcode values (e.g., categoryId, match IDs, library scores).
- DO NOT rely exclusively on library match ‚Äî instead analyze actual uploaded data.

---

üü° START INTELLIGENT LOGIC FROM STEP 3

üîç STEP 3: Generate Evidence Checklist

- Checklist must be generated  based on equipment group/type/subtype logic already built.
- Each checklist item should contain:
  - evidenceCategory: Vibration, IR, Current, Temp, etc.
  - required: true/false
  - expectedFileTypes: ["csv", "txt", "xlsx", "pdf"]
  - aiPrompt: Question to ask the user (e.g., "Can you upload vibration trend or spectrum?")
- Save the checklist under incident.evidenceChecklist in DB.

---

üîé STEP 4: Evidence Collection & Backend AI Evaluation

1. Evidence File Parsing (No Hardcoding)
- Based on uploaded file type:
  - .txt ‚ûú Check for waveform, timestamps, peak readings.
  - .csv ‚ûú Parse headers, time series, detect key fields: RPM, Temp, 1X/2X Vibration.
  - .xlsx ‚ûú Read table ranges, extract time series if present.
- Each file should trigger AI to compute:
  - diagnosticValue: Low, Medium, High
  - parsedResultSummary: e.g., ‚ÄúDominant 1X spike observed‚Äù
  - evidenceConfidenceImpact: numerical or tag
  - aiRemarks: Any intelligent interpretation

2. Evaluate If Data is Incomplete or Missing
- If uploaded data is missing structure (e.g., no time column, or axis units), AI must:
  - Prompt the user clearly:  
    ‚ÄúThis vibration file lacks timestamp or frequency units. Please clarify or re-upload.‚Äù
  - Allow user to respond with:
    - Re-upload
    - Tick ‚ÄúNot Available‚Äù with a reason
- If user cannot provide data:
  - Mark that item as status = Unavailable with reason
  - AI should continue using hypothesis

---

üß† STEP 4.5: Proceeding with Hypothesis

If uploaded evidence is missing or weak:
- AI continues with hypothesis-based RCA, using symptom, incident description, and checklist data.
- Show message in UI:  
  > "Analysis is based on hypothesis due to missing or insufficient evidence. Confidence reduced."
- Root Cause and Recommendations must be auto-labeled with lowered confidence (e.g., <50%)

---

üîç STEP 5 OUTPUT ENHANCEMENT

For each RCA tab (Root Cause, Recommendations, Evidence Gaps):
- Always show a summary of what AI found in evidence (even if confidence is low).
- Examples:
  - ‚ÄúUploaded vibration file shows normal 1X/2X amplitude. No severe signature found.‚Äù
  - ‚ÄúIR scan was not provided ‚Äî shaft misalignment assumed based on symptoms.‚Äù
- Avoid blank screens like in attached screenshots ‚Äî always show AI's reasoning, even if assumption-based.

---

üìÅ Evidence Metadata Requirements

Every uploaded file should save metadata:
- filename
- evidenceType (trend / log / image / report)
- diagnosticValue
- parsedResultSummary
- aiRemarks
- evidenceConfidenceImpact
- status (Available / Unavailable)
- userProvidedReason (if marked Unavailable)

---

üìö Evidence Library ‚Äî Use With Caution

- AI should NOT fall back entirely on library match.
- Library match is just one input.
- Even if library match fails, continue based on actual uploaded data, and show logic in UI.

---

üß© Evidence Library Enrichment (Long-Term)

- Whenever new evidence is analyzed and result accepted (by admin), AI can suggest updates to:
  - Fault Signature Pattern
  - AI Prompt Templates
  - Required Evidence Fields

But:
- Admin must approve suggested enrichment.
- Never auto-update Evidence Library without user/admin approval.

---

‚ö†Ô∏è NO HARDCODING MANDATE

- All logic must be schema-driven and AI-interpreted.
- DO NOT hardcode:
  - IncidentId, CategoryId
  - Any specific logic path for Incident # or Equipment ID
  - Any fallback threshold (e.g., match > 80%) ‚Äî use configurable flags

---

üß± FINAL NOTES

- Preserve all functioning transitions and UI logic in current Steps 5‚Äì6.
- From Step 3 onwards, ensure AI analyzes every file and shows results in Step 5 tabs.
- Prevent ‚Äúempty tabs‚Äù as seen in screenshots. Every RCA must show:  
  - AI Interpretation  
  - Confidence Level  
  - Missing Data Prompts

---

‚úÖ END OF INSTRUCTION FILE
