
FINAL ENFORCEMENT ‚Äî UNIVERSAL RCA LOGIC COMPLIANCE (INCIDENT 66)
=================================================================


CONTEXT:
--------
This instruction addresses the failure observed in Incident 66 ("pump failed with casing damage") despite Replit‚Äôs prior claim that universal RCA filtering logic has been implemented.

KEY FAILURE OBSERVED:
---------------------
‚úîÔ∏è The system checks Equipment Group + Type + Subtype:
    ‚Üí "Rotating ‚Üí Pumps ‚Üí Centrifugal"
‚úîÔ∏è Then loads all failure modes related to this subtype.

‚ùå BUT it fails to filter those failure modes based on incident text ("casing damage").

This means the system is still functioning on **static subtype-level logic**, not truly universal logic based on incident-specific context.

FAILURE MODES SHOWN (INCORRECTLY):
----------------------------------
- Shaft Breakage
- Shaft Key Shear
- Motor Overload (!)
- Seal Leak
- Misalignment
- Impeller Damage
- Bearing Failure
...and more

ONLY the following should have been prompted:
- Casing Crack
- Overpressure
- Structural Fatigue
...with prompts for evidence like Pressure Trends, Leak Logs, Inspections

THIS IS A CRITICAL NON-COMPLIANCE.

MANDATORY LOGIC THAT MUST BE IMPLEMENTED:
-----------------------------------------

‚úÖ STEP 1: Match Equipment Group + Type + Subtype  
‚Üí Load *candidate* failure modes from the Evidence Library (OK)

‚úÖ STEP 2: Parse Incident Title + Description  
‚Üí Extract keywords (e.g., "casing", "damage", "crack")

‚úÖ STEP 3: Filter Failure Modes  
‚Üí From candidate modes, select only those where:
    - failure_mode.description OR
    - failure_mode.keywords
    MATCH incident keywords

‚úÖ STEP 4: Present Only Relevant Prompts  
‚Üí Ask for only those evidence items associated with filtered failure modes

‚úÖ STEP 5: Allow Manual Expansion  
‚Üí Let user add failure modes manually if needed (but don‚Äôt load all by default)

üö´ ABSOLUTELY FORBIDDEN:
------------------------
‚ùå DO NOT load all failure modes for a given subtype by default  
‚ùå DO NOT hardcode ANY logic tied to "Pump", "Motor", "Valve", or ANY subtype  
‚ùå DO NOT insert failure modes manually in code based on equipment keywords
‚ùå DO NOT add or insert any hardcoded RCA logic

‚úÖ ALL LOGIC MUST BE:
---------------------
- Data-driven
- NLP-assisted
- Based on evidence library match
- Equipment-agnostic and scalable
- Fully universal across all asset types

THIS IS NON-NEGOTIABLE FOR UNIVERSAL RCA SYSTEM DESIGN.

ACTION REQUIRED:
----------------
Replit developers must update the RCA engine to:
- Add dynamic keyword-based filtering layer
- Ensure failure modes are selected using NLP logic, not just equipment subtype
- Verify that the tool behaves the same regardless of what equipment is selected ‚Äî logic must be completely portable

END OF FINAL ENFORCEMENT INSTRUCTION
