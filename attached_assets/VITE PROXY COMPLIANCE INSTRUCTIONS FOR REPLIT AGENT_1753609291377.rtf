{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fmodern\fcharset0 Courier;\f1\froman\fcharset0 Times-Roman;\f2\froman\fcharset0 Times-Bold;
}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;\red0\green0\blue233;}
{\*\expandedcolortbl;;\cssrgb\c0\c0\c0;\cssrgb\c0\c0\c93333;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat3\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid101\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid102\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat4\levelspace360\levelindent0{\*\levelmarker \{decimal\}}{\leveltext\leveltemplateid201\'01\'00;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{circle\}}{\leveltext\leveltemplateid202\'01\uc0\u9702 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid4}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs26 \cf0 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 VITE PROXY COMPLIANCE INSTRUCTIONS FOR REPLIT AGENT\
\
====================================================\
ZERO TOLERANCE POLICY: Universal Protocol Compliance\
====================================================\
\
You MUST comply with the Universal Protocol Standard for ALL code:\
\
- NO hardcoded values, API keys, URLs, model names, provider names, ports, or magic numbers.\
- NO random value generation in code (Math.random, Date.now, crypto.randomUUID, etc.).\
- ALL configuration (including API endpoints, provider info, timeouts, and keys) must be admin/database/environment-driven.\
- ALL API calls from frontend must use RELATIVE paths (e.g. "/api/route")\'97never hardcoded hostnames or ports.\
- You MUST run protocol_check.sh and fix ALL violations before any commit or push.\
- Any violation is UNACCEPTABLE and blocks your work.\
- If in doubt, run protocol compliance checks and confirm with user.\
\
===================================\
VITE PROXY & API CALL INSTRUCTIONS\
===================================\
\
1. **API Routing**\
   - ALL API endpoints must be called from the client as `/api/route` (relative path).\
   - DO NOT use absolute URLs like `http://localhost:5000/api/...` or any hardcoded port.\
   - Backend must expose API routes under `/api/`.\
\
2. **Vite Proxy Configuration**\
   - Ensure `vite.config.ts` (or `vite.config.js`) includes the following for backend proxying:\
\
```js\
// Example for vite.config.ts\
export default \{\
  server: \{\
    proxy: \{\
      '/api': 'http://localhost:5000'\
    \}\
  \}\
\}\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls1\ilvl0
\f1\fs24 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Replace 
\f0\fs26 5000
\f1\fs24  with your backend port if different.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls2\ilvl0
\f2\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	3	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Error Handling in API Calls
\f1\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls2\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 ALWAYS check that the backend response is JSON, not HTML (to catch proxy/misroute issues).\
\ls2\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Example (React/TS):\
\pard\pardeftab720\partightenfactor0

\f0\fs26 \cf0 const response = await fetch('/api/your-route');\
if (response.headers.get('content-type')?.includes('application/json')) \{\
  const data = await response.json();\
  // Handle data\
\} else \{\
  throw new Error('Backend returned HTML instead of JSON. Check Vite proxy config.');\
\}\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls3\ilvl0
\f2\b\fs24 \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	4	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Environment Variables
\f1\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls3\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 All configuration, timeouts, model names, API URLs, etc., must come from 
\f0\fs26 .env
\f1\fs24 , admin panel, or database.\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 DO NOT use static values or magic numbers in code.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls3\ilvl0
\f2\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	5	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Commit/Push Policy
\f1\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls3\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 You MUST run 
\f0\fs26 protocol_check.sh
\f1\fs24  before any commit or push.\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 If any violation is found, STOP and FIX before proceeding.\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 No code with violations may be committed or pushed.\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls3\ilvl0
\f2\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	6	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Common Violations to Avoid
\f1\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls3\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Hardcoded API keys (e.g., 
\f0\fs26 const apiKey = "sk-xxx"
\f1\fs24 )\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Random generators (
\f0\fs26 Math.random()
\f1\fs24 , 
\f0\fs26 Date.now()
\f1\fs24 )\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Hardcoded URLs, ports, model names, or provider names (
\f0\fs26 "https://api.openai.com"
\f1\fs24 , 
\f0\fs26 "gpt-4"
\f1\fs24 )\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Magic numbers/config in code (
\f0\fs26 const MAX_SIZE = 1000
\f1\fs24 )\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 API calls that do not use 
\f0\fs26 /api/...
\f1\fs24  relative path\
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls3\ilvl0
\f2\b \cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	7	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 If Backend Returns HTML Instead of JSON
\f1\b0 \
\pard\tx940\tx1440\pardeftab720\li1440\fi-1440\sa240\partightenfactor0
\ls3\ilvl1\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 This is a sign of incorrect Vite proxy config or API route.\
\ls3\ilvl1\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u9702 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Fix proxy config, never bypass with absolute URLs.\
\pard\pardeftab720\sa240\partightenfactor0
\cf0 ================================\uc0\u8232 
\f2\b EXAMPLE:
\f1\b0 \uc0\u8232 // CORRECT: (Client fetch)\u8232 fetch('/api/evidence-library')\
// INCORRECT:\uc0\u8232 fetch('{\field{\*\fldinst{HYPERLINK "http://localhost:5000/api/evidence-library"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 http://localhost:5000/api/evidence-library}}')\uc0\u8232 fetch('{\field{\*\fldinst{HYPERLINK "http://127.0.0.1:5000/api/evidence-library"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 http://127.0.0.1:5000/api/evidence-library}}')\uc0\u8232 fetch('{\field{\*\fldinst{HYPERLINK "https://api.openai.com/"}}{\fldrslt \cf3 \ul \ulc3 \strokec3 https://api.openai.com/}}...')\
================================\uc0\u8232 
\f2\b REMINDER:
\f1\b0 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\sa240\partightenfactor0
\ls4\ilvl0\cf0 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 These instructions are mandatory for all code and workflow changes.\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Non-compliance will block development and deployment.\
\ls4\ilvl0\kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Ask the user if any technical or protocol detail is unclear.\
\pard\pardeftab720\sa240\partightenfactor0
\cf0 LAST UPDATED: 2025-07-27}