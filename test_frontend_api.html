<!DOCTYPE html>
<html>
<head><title>API Test</title></head>
<body>
<h1>Frontend API Test</h1>
<button onclick="testAPI()">Test Incident Creation</button>
<div id="result"></div>

<script>
async function testAPI() {
  const result = document.getElementById('result');
  result.innerHTML = 'Testing...';
  
  try {
    const response = await fetch('/api/incidents', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        title: 'Frontend Test',
        description: 'Testing frontend connectivity',
        priority: 'Medium',
        equipment_group_id: 1,
        equipment_type_id: 30,
        equipment_subtype_id: 300,
        equipmentId: 'TEST-001',
        location: 'Test Location',
        reportableStatus: 'not_reportable'
      })
    });
    
    const data = await response.json();
    result.innerHTML = `
      <h3>Response Status: ${response.status}</h3>
      <h3>Response Data:</h3>
      <pre>${JSON.stringify(data, null, 2)}</pre>
    `;
  } catch (error) {
    result.innerHTML = `<h3>Error: ${error.message}</h3>`;
  }
}
</script>
</body>
</html>
